SceneSceneBrowser.selectedChannel;SceneSceneBrowser.browser=true;SceneSceneBrowser.noNetwork=false;SceneSceneBrowser.errorNetwork=false;SceneSceneBrowser.ItemsLimit=100;SceneSceneBrowser.ColoumnsCount=4;SceneSceneBrowser.MODE_NONE=-1;SceneSceneBrowser.MODE_ALL=0;SceneSceneBrowser.MODE_GAMES=1;SceneSceneBrowser.MODE_GAMES_STREAMS=2;SceneSceneBrowser.MODE_GO=3;SceneSceneBrowser.MODE_TOOLS=4;SceneSceneBrowser.MODE_FOLLOWER=5;SceneSceneBrowser.mode=SceneSceneBrowser.MODE_NONE;SceneSceneBrowser.modeReturn=SceneSceneBrowser.MODE_NONE;SceneSceneBrowser.STATE_FOLLOWER_NONE=-1;SceneSceneBrowser.STATE_FOLLOWER_NAME_LIST=0;SceneSceneBrowser.STATE_FOLLOWER_CHANNELS_INFO=1;SceneSceneBrowser.STATE_FOLLOWER_GAMES_INFO=2;SceneSceneBrowser.STATE_FOLLOWER_LIVE_HOST=3;SceneSceneBrowser.state_follower=SceneSceneBrowser.STATE_FOLLOWER_NONE;SceneSceneBrowser.followerMatrix=[];SceneSceneBrowser.isShowDialogOn=false;SceneSceneBrowser.returnToGames=true;SceneSceneBrowser.gameSelected=null;SceneSceneBrowser.followerChannels;SceneSceneBrowser.loadingFollower=false;SceneSceneBrowser.itemsCount=0;SceneSceneBrowser.itemsCountFollowerChannels=0;SceneSceneBrowser.itemsCountFollowerLiveHosts=0;SceneSceneBrowser.itemsCountFollowerGames=0;SceneSceneBrowser.rowsCountFollower=0;SceneSceneBrowser.cursorX=0;SceneSceneBrowser.cursorY=0;SceneSceneBrowser.ime=null;SceneSceneBrowser.ime2=null;SceneSceneBrowser.loadingData=false;SceneSceneBrowser.loadingDataTryMax=15;SceneSceneBrowser.loadingDataTry;SceneSceneBrowser.loadingDataTimeout;SceneSceneBrowser.dataEnded=false;SceneSceneBrowser.listenerID;tizen.tvinputdevice.registerKey("ChannelUp");tizen.tvinputdevice.registerKey("ChannelDown");tizen.tvinputdevice.registerKey("Tools");tizen.tvinputdevice.registerKey("1");tizen.tvinputdevice.registerKey("4");tizen.tvinputdevice.registerKey("0");tizen.tvinputdevice.registerKey("9");tizen.tvinputdevice.registerKey("ColorF0Red");tizen.tvinputdevice.registerKey("ColorF1Green");tizen.tvinputdevice.registerKey("ColorF2Yellow");tizen.tvinputdevice.registerKey("ColorF3Blue");var ScrollHelper={documentVerticalScrollPosition:function(){if(self.pageYOffset){return self.pageYOffset;}if(document.documentElement&&document.documentElement.scrollTop){return document.documentElement.scrollTop;}if(document.body.scrollTop){return document.body.scrollTop;}return 0;},viewportHeight:function(){return(document.compatMode==="CSS1Compat")?document.documentElement.clientHeight:document.body.clientHeight;},documentHeight:function(){return(document.height!==undefined)?document.height:document.body.offsetHeight;},documentMaximumScrollPosition:function(){return this.documentHeight()-this.viewportHeight();},elementVerticalClientPositionById:function(c){var b=document.getElementById(c);var a=b.getBoundingClientRect();return a.top;},scrollVerticalToElementById:function(d,c){var a=document.getElementById(d);if(a==null){return;}var b=this.documentVerticalScrollPosition()+this.elementVerticalClientPositionById(d)-0.25*this.viewportHeight()-c;$(window).scrollTop(b);}};function addCommas(b){b+="";x=b.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var a=/(\d+)(\d{3})/;while(a.test(x1)){x1=x1.replace(a,"$1,$2");}return x1+x2;}function sleep(a,b){setTimeout(function(){b();},a);}SceneSceneBrowser.createCell=function(b,i,e,a,h,d,f,g){var c;if(g){c='style="right: 0;"';}else{c='style="right: 20%;"';}return $('<td id="cell_'+b+"_"+i+'" class="stream_cell" data-channelname="'+e+'"></td>').html('<img id="thumbnail_'+b+"_"+i+'" class="stream_thumbnail" src="'+a+'"/> 			<div class="stream_text" '+c+'> 			<div class="stream_title">'+h+'</div> 			<div class="stream_info">'+d+'</div>             <div class="stream_info">'+f+"</div>             </div>");};SceneSceneBrowser.createCellEmpty=function(){return $('<td class="stream_cell"></td>').html("");};SceneSceneBrowser.loadDataError=function(f,c){var b=false;if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_FOLLOWER||SceneSceneBrowser.mode===SceneSceneBrowser.MODE_GO){try{var a=$.parseJSON(c);if(a.message==="User '"+SceneSceneBrowser.followerUsername+"' does not exist"){b=true;SceneSceneBrowser.loadingData=false;SceneSceneBrowser.showDialog(STR_USERNAME+" '"+SceneSceneBrowser.followerUsername+"' "+STR_DOES_NOT_EXIST);}else{if((a.message==="Channel '"+SceneSceneBrowser.selectedChannel+"' does not exist")||(a.message==="Channel '"+SceneSceneBrowser.selectedChannel+"' is unavailable")){b=true;SceneSceneBrowser.loadingData=false;SceneSceneBrowser.showDialog(STR_CHANNEL+" '"+SceneSceneBrowser.selectedChannel+"' "+STR_DOES_NOT_EXIST);}}}catch(d){}}if(!b){SceneSceneBrowser.loadingDataTry++;if(SceneSceneBrowser.loadingDataTry<SceneSceneBrowser.loadingDataTryMax){if(SceneSceneBrowser.loadingDataTry<10){SceneSceneBrowser.loadingDataTimeout+=100;}else{switch(SceneSceneBrowser.loadingDataTry){case 10:SceneSceneBrowser.loadingDataTimeout=5000;break;case 11:SceneSceneBrowser.loadingDataTimeout=10000;break;case 12:SceneSceneBrowser.loadingDataTimeout=30000;break;case 13:SceneSceneBrowser.loadingDataTimeout=60000;break;default:SceneSceneBrowser.loadingDataTimeout=300000;break;}}SceneSceneBrowser.loadDataRequest();}else{f=(typeof f==="undefined")?"Unknown":f;SceneSceneBrowser.loadingData=false;SceneSceneBrowser.showDialog("Unable to load stream data. Reason: "+f);}}};SceneSceneBrowser.loadDataSuccess=function(m){var b=$.parseJSON(m);var d;if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_NAME_LIST){d=b.follows.length;var l;var o=[];SceneSceneBrowser.followerChannels="";for(l=0;l<d;l++){var v=b.follows[l];o.push(v.channel.name);}SceneSceneBrowser.followerChannels=o.join();SceneSceneBrowser.state_follower=SceneSceneBrowser.STATE_FOLLOWER_CHANNELS_INFO;SceneSceneBrowser.loadDataRequest();}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_GO){if(b.stream===null){SceneSceneBrowser.loadingData=false;SceneSceneBrowser.showDialog(STR_CHANNEL+" '"+SceneSceneBrowser.selectedChannel+"' "+STR_IS_OFFLINE);}else{SceneSceneBrowser.openStream();}}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_GAMES){d=b.top.length;}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_GAMES_INFO){d=b.follows.length;}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_LIVE_HOST){d=b.hosts.length;}else{d=b.streams.length;}}}if(d<SceneSceneBrowser.ItemsLimit){SceneSceneBrowser.dataEnded=true;}var g=SceneSceneBrowser.itemsCount;SceneSceneBrowser.itemsCount+=d;var s=d/SceneSceneBrowser.ColoumnsCount;if(d%SceneSceneBrowser.ColoumnsCount>0){s++;}var e=0;if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_FOLLOWER){if(SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_CHANNELS_INFO){var a=$("<tbody></tbody>");$("#stream_table").append(a);$("#stream_table").css("padding-top","0%");var q=$('<tr class="follower_header"></tr>').html('<div class="follower_header">'+STR_LIVE_CHANNELS+"</div>");}else{if(SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_LIVE_HOST){var q=$('<tr class="follower_header"></tr>').html('<div class="follower_header">'+STR_LIVE_HOSTS+"</div>");}else{if(SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_GAMES_INFO){var q=$('<tr class="follower_header"></tr>').html('<div class="follower_header">'+STR_LIVE_GAMES+"</div>");}}}$("#stream_table").find("tbody").append(q);}var n;for(var r=0;r<s;r++){if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_FOLLOWER){var k=SceneSceneBrowser.rowsCountFollower+r;}else{var k=g/SceneSceneBrowser.ColoumnsCount+r;}var h=$("<tr></tr>");var p=[];for(n=0;n<SceneSceneBrowser.ColoumnsCount&&e<d;n++,e++){var c;if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_GAMES){var u=b.top[e];c=SceneSceneBrowser.createCell(k,n,u.game.name,u.game.box.large,u.game.name,addCommas(u.viewers)+" Viewers","",true);}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_LIVE_HOST){var j=b.hosts[e];p[n]=[j.target.channel.name,"stream"];c=SceneSceneBrowser.createCell(k,n,j.target.channel.name,j.target.preview,j.display_name+" Hosting "+j.target.channel.display_name,j.target.title,addCommas(j.target.viewers)+" Viewers",false);}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_GAMES_INFO){var u=b.follows[e];p[n]=[u.game.name,"game"];c=SceneSceneBrowser.createCell(k,n,u.game.name,u.game.box.large,u.game.name,addCommas(u.viewers)+" Viewers","",true);}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_CHANNELS_INFO){var f=b.streams[e];p[n]=[f.channel.name,"stream"];c=SceneSceneBrowser.createCell(k,n,f.channel.name,f.preview.medium,f.channel.status,f.channel.display_name,addCommas(f.viewers)+" Viewers",false);}else{var f=b.streams[e];c=SceneSceneBrowser.createCell(k,n,f.channel.name,f.preview.medium,f.channel.status,f.channel.display_name,addCommas(f.viewers)+" Viewers",false);}}}}h.append(c);}for(;n<SceneSceneBrowser.ColoumnsCount;n++){h.append(SceneSceneBrowser.createCellEmpty());}SceneSceneBrowser.followerMatrix[k]=p;$("#stream_table").append(h);}sleep(2000,function(){SceneSceneBrowser.showTable();SceneSceneBrowser.addFocus();if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_CHANNELS_INFO){SceneSceneBrowser.state_follower=SceneSceneBrowser.STATE_FOLLOWER_LIVE_HOST;SceneSceneBrowser.itemsCountFollowerChannels=SceneSceneBrowser.itemsCount;SceneSceneBrowser.rowsCountFollower+=Math.ceil(SceneSceneBrowser.itemsCount/SceneSceneBrowser.ColoumnsCount);SceneSceneBrowser.itemsCount=0;SceneSceneBrowser.loadDataRequest();}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_LIVE_HOST){SceneSceneBrowser.state_follower=SceneSceneBrowser.STATE_FOLLOWER_GAMES_INFO;SceneSceneBrowser.itemsCountFollowerLiveHosts=SceneSceneBrowser.itemsCount;SceneSceneBrowser.rowsCountFollower+=Math.ceil(SceneSceneBrowser.itemsCount/SceneSceneBrowser.ColoumnsCount);SceneSceneBrowser.itemsCount=0;SceneSceneBrowser.loadDataRequest();}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_GAMES_INFO){SceneSceneBrowser.state_follower=SceneSceneBrowser.STATE_FOLLOWER_NONE;SceneSceneBrowser.itemsCountFollowerGames=SceneSceneBrowser.itemsCount;SceneSceneBrowser.rowsCountFollower+=Math.ceil(SceneSceneBrowser.itemsCount/SceneSceneBrowser.ColoumnsCount);SceneSceneBrowser.loadingData=false;}else{SceneSceneBrowser.loadingData=false;}}}});}}};SceneSceneBrowser.loadDataRequest=function(){try{var d="";if(SceneSceneBrowser.loadingDataTry>0){d=STR_RETRYING+" ("+(SceneSceneBrowser.loadingDataTry+1)+"/"+SceneSceneBrowser.loadingDataTryMax+")";}SceneSceneBrowser.showDialog(d);var a=new XMLHttpRequest();var c;var e=SceneSceneBrowser.itemsCount;if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_GAMES){c="https://api.twitch.tv/kraken/games/top?limit="+SceneSceneBrowser.ItemsLimit+"&offset="+e;}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_GAMES_STREAMS){c="https://api.twitch.tv/kraken/streams?game="+encodeURIComponent(SceneSceneBrowser.gameSelected)+"&limit="+SceneSceneBrowser.ItemsLimit+"&offset="+e;}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_NAME_LIST){c="https://api.twitch.tv/kraken/users/"+encodeURIComponent(SceneSceneBrowser.followerUsername)+"/follows/channels?limit="+SceneSceneBrowser.ItemsLimit+"&offset="+e;}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_CHANNELS_INFO){c="https://api.twitch.tv/kraken/streams/?channel="+encodeURIComponent(SceneSceneBrowser.followerChannels)+"&limit="+SceneSceneBrowser.ItemsLimit+"&offset="+e;}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_GAMES_INFO){c="https://api.twitch.tv/api/users/"+encodeURIComponent(SceneSceneBrowser.followerUsername)+"/follows/games/live?limit="+SceneSceneBrowser.ItemsLimit;}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER&&SceneSceneBrowser.state_follower===SceneSceneBrowser.STATE_FOLLOWER_LIVE_HOST){c="https://api.twitch.tv/api/users/"+encodeURIComponent(SceneSceneBrowser.followerUsername)+"/followed/hosting?limit="+SceneSceneBrowser.ItemsLimit;}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_GO){c="https://api.twitch.tv/kraken/streams/"+encodeURIComponent(SceneSceneBrowser.selectedChannel);}else{c="https://api.twitch.tv/kraken/streams?limit="+SceneSceneBrowser.ItemsLimit+"&offset="+e;}}}}}}}a.ontimeout=function(){};a.onreadystatechange=function(){if(a.readyState===4){if(a.status===200){try{SceneSceneBrowser.loadDataSuccess(a.responseText);}catch(f){SceneSceneBrowser.showDialog("loadDataSuccess() exception: "+f.name+" "+f.message);}}else{SceneSceneBrowser.loadDataError("HTTP Status "+a.status+" Message: "+a.statusText,a.responseText);}}};a.open("GET",c,true);a.timeout=SceneSceneBrowser.loadingDataTimeout;a.send(null);}catch(b){SceneSceneBrowser.loadDataError(b.message,null);}};SceneSceneBrowser.loadData=function(){if((SceneSceneBrowser.itemsCount%SceneSceneBrowser.ColoumnsCount!=0)||SceneSceneBrowser.loadingData){return;}SceneSceneBrowser.loadingData=true;SceneSceneBrowser.loadingDataTry=0;SceneSceneBrowser.loadingDataTimeout=500;SceneSceneBrowser.loadDataRequest();};SceneSceneBrowser.showDialog=function(a){$("#dialog_loading_text").text(a);if(!SceneSceneChannel.isShowDialogOn){SceneSceneBrowser.isShowDialogOn=true;$("#streamname_frame").hide();$("#stream_table").hide();$("#username_frame").hide();$("#dialog_loading").show();}};SceneSceneBrowser.showTable=function(){SceneSceneBrowser.isShowDialogOn=false;$("#dialog_loading").hide();$("#streamname_frame").hide();$("#username_frame").hide();$("#stream_table").show();ScrollHelper.scrollVerticalToElementById("thumbnail_"+SceneSceneBrowser.cursorY+"_"+SceneSceneBrowser.cursorX,0);};SceneSceneBrowser.showInput=function(){SceneSceneBrowser.isShowDialogOn=false;$("#dialog_loading").hide();$("#stream_table").hide();$("#streamname_frame").show();$("#username_frame").hide();};SceneSceneBrowser.showInputTools=function(){SceneSceneBrowser.isShowDialogOn=false;$("#dialog_loading").hide();$("#stream_table").hide();$("#streamname_frame").hide();$("#username_frame").show();};SceneSceneBrowser.switchMode=function(a){if(a!=SceneSceneBrowser.mode){SceneSceneBrowser.modeReturn=SceneSceneBrowser.mode;SceneSceneBrowser.mode=a;$("#tip_icon_channels").removeClass("tip_icon_active");$("#tip_icon_games").removeClass("tip_icon_active");$("#tip_icon_open").removeClass("tip_icon_active");$("#tip_icon_refresh").removeClass("tip_icon_active");if(a==SceneSceneBrowser.MODE_ALL){$("#tip_icon_channels").addClass("tip_icon_active");SceneSceneBrowser.refresh();}else{if(a==SceneSceneBrowser.MODE_GAMES){$("#tip_icon_games").addClass("tip_icon_active");SceneSceneBrowser.refresh();}else{if(a==SceneSceneBrowser.MODE_GAMES_STREAMS){$("#tip_icon_games").addClass("tip_icon_active");SceneSceneBrowser.refresh();}else{if(a==SceneSceneBrowser.MODE_GO){$("#tip_icon_open").addClass("tip_icon_active");SceneSceneBrowser.clean();SceneSceneBrowser.showInput();SceneSceneBrowser.refreshInputFocus();}else{if(a==SceneSceneBrowser.MODE_TOOLS){SceneSceneBrowser.clean();SceneSceneBrowser.showInputTools();SceneSceneBrowser.refreshInputFocusTools();}else{if(a==SceneSceneBrowser.MODE_FOLLOWER){if(SceneSceneBrowser.followerUsername!=null&&!SceneSceneBrowser.isShowDialogOn){SceneSceneBrowser.state_follower=SceneSceneBrowser.STATE_FOLLOWER_NAME_LIST;SceneSceneBrowser.refresh();}else{SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_TOOLS);}}}}}}}}};SceneSceneBrowser.clean=function(){$("#stream_table").empty();SceneSceneBrowser.itemsCount=0;SceneSceneBrowser.rowsCountFollower=0;SceneSceneBrowser.followerMatrix=[];SceneSceneBrowser.cursorX=0;SceneSceneBrowser.cursorY=0;SceneSceneBrowser.dataEnded=false;};SceneSceneBrowser.refresh=function(){if(SceneSceneBrowser.mode!=SceneSceneBrowser.MODE_GO){if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER){SceneSceneBrowser.state_follower=SceneSceneBrowser.STATE_FOLLOWER_NAME_LIST;}SceneSceneBrowser.clean();SceneSceneBrowser.loadData();}};SceneSceneBrowser.removeFocus=function(){$("#thumbnail_"+SceneSceneBrowser.cursorY+"_"+SceneSceneBrowser.cursorX).removeClass("stream_thumbnail_focused");};SceneSceneBrowser.addFocus=function(){if(SceneSceneBrowser.cursorY+5>SceneSceneBrowser.itemsCount/SceneSceneBrowser.ColoumnsCount&&!SceneSceneBrowser.dataEnded){SceneSceneBrowser.loadData();}$("#thumbnail_"+SceneSceneBrowser.cursorY+"_"+SceneSceneBrowser.cursorX).addClass("stream_thumbnail_focused");ScrollHelper.scrollVerticalToElementById("thumbnail_"+SceneSceneBrowser.cursorY+"_"+SceneSceneBrowser.cursorX,0);};SceneSceneBrowser.getCellsCount=function(a){return Math.min(SceneSceneBrowser.ColoumnsCount,SceneSceneBrowser.itemsCount-a*SceneSceneBrowser.ColoumnsCount);};SceneSceneBrowser.getRowsCount=function(){var a=SceneSceneBrowser.itemsCount/SceneSceneBrowser.ColoumnsCount;if(SceneSceneBrowser.itemsCount%SceneSceneBrowser.ColoumnsCount>0){a++;}return a;};SceneSceneBrowser.getRowsCountFollower=function(){var a=[Math.ceil(SceneSceneBrowser.itemsCountFollowerChannels/SceneSceneBrowser.ColoumnsCount),Math.ceil(SceneSceneBrowser.itemsCountFollowerGames/SceneSceneBrowser.ColoumnsCount),Math.ceil(SceneSceneBrowser.itemsCountFollowerLiveHosts/SceneSceneBrowser.ColoumnsCount)];return a;};SceneSceneBrowser.refreshInputFocus=function(){$("#streamname_input").removeClass("channelname");$("#streamname_input").removeClass("channelname_focused");$("#streamname_button").removeClass("button_go");$("#streamname_button").removeClass("button_go_focused");if(SceneSceneBrowser.cursorY==0){$("#streamname_input").addClass("channelname_focused");$("#streamname_button").addClass("button_go");}else{$("#streamname_input").addClass("channelname");$("#streamname_button").addClass("button_go_focused");}};SceneSceneBrowser.refreshInputFocusTools=function(){$("#username_input").removeClass("channelname");$("#username_input").removeClass("channelname_focused");$("#username_button").removeClass("button_go");$("#username_button").removeClass("button_go_focused");if(SceneSceneBrowser.cursorY==0){$("#username_input").addClass("channelname_focused");$("#username_button").addClass("button_go");}else{$("#username_input").addClass("channelname");$("#username_button").addClass("button_go_focused");}};SceneSceneBrowser.openStream=function(){document.body.removeEventListener("keydown",SceneSceneBrowser.prototype.handleKeyDown);document.body.addEventListener("keydown",SceneSceneChannel.prototype.handleKeyDown,false);SceneSceneBrowser.browser=false;$("#scene1").hide();$("#scene2").show();$("#scene2").focus();SceneSceneChannel.prototype.handleFocus();};function SceneSceneBrowser(){}SceneSceneBrowser.initLanguage=function(){$(".label_channels").html(STR_CHANNELS);$(".label_games").html(STR_GAMES);$(".label_open").html(STR_OPEN);$(".label_refresh").html(STR_REFRESH);$(".label_placeholder_open").attr("placeholder",STR_PLACEHOLDER_OPEN);$(".label_placeholder_tools").attr("placeholder",STR_PLACEHOLDER_TOOLS);};document.addEventListener("DOMContentLoaded",function(b){SceneSceneBrowser.initLanguage();$("#scene2").hide();SceneSceneBrowser.loadingData=false;var a=localStorage.getItem("followerUsername");$("#username_input").val(a);SceneSceneBrowser.followerUsername=a;var c=localStorage.getItem("defaultQuality");if(c!==null){SceneSceneChannel.quality=c;SceneSceneChannel.qualityPlaying=c;}document.body.addEventListener("keydown",SceneSceneBrowser.prototype.handleKeyDown,false);SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_ALL);SceneSceneChannel.prototype.initialize();SceneSceneBrowser.addNetworkStateChangeListener();});SceneSceneBrowser.prototype.handleShow=function(a){};SceneSceneBrowser.prototype.handleHide=function(){SceneSceneBrowser.clean();};SceneSceneBrowser.prototype.handleFocus=function(){SceneSceneBrowser.refresh();};SceneSceneBrowser.prototype.handleBlur=function(){};SceneSceneBrowser.prototype.handleKeyDown=function(a){if(a.keyCode==TvKeyCode.KEY_RETURN){if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_GAMES_STREAMS&&!SceneSceneBrowser.loadingData){if(SceneSceneBrowser.returnToGames){a.preventDefault();SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_GAMES);}else{a.preventDefault();SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_FOLLOWER);}return;}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_ALL){tizen.application.getCurrentApplication().exit();}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_GO){if(SceneSceneBrowser.isShowDialogOn){SceneSceneBrowser.clean();SceneSceneBrowser.showInput();SceneSceneBrowser.refreshInputFocus();}else{SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_ALL);}}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_FOLLOWER){if(SceneSceneBrowser.isShowDialogOn&&SceneSceneBrowser.modeReturn===SceneSceneBrowser.MODE_TOOLS){SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_TOOLS);}else{SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_ALL);}}else{if(SceneSceneBrowser.mode===SceneSceneBrowser.MODE_GAMES||SceneSceneBrowser.mode===SceneSceneBrowser.MODE_TOOLS){SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_ALL);}}}}}}if(SceneSceneBrowser.loadingData||SceneSceneBrowser.noNetwork){return;}switch(a.keyCode){case TvKeyCode.KEY_LEFT:if(SceneSceneBrowser.mode!=SceneSceneBrowser.MODE_GO&&SceneSceneBrowser.mode!=SceneSceneBrowser.MODE_TOOLS){if(SceneSceneBrowser.cursorX>0){SceneSceneBrowser.removeFocus();SceneSceneBrowser.cursorX--;SceneSceneBrowser.addFocus();}}break;case TvKeyCode.KEY_RIGHT:if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_FOLLOWER){if(typeof SceneSceneBrowser.followerMatrix[SceneSceneBrowser.cursorY][SceneSceneBrowser.cursorX+1]!=="undefined"){a.preventDefault();SceneSceneBrowser.removeFocus();SceneSceneBrowser.cursorX++;SceneSceneBrowser.addFocus();}}else{if(SceneSceneBrowser.mode!=SceneSceneBrowser.MODE_GO&&SceneSceneBrowser.mode!=SceneSceneBrowser.MODE_TOOLS){if(SceneSceneBrowser.cursorX<SceneSceneBrowser.getCellsCount(SceneSceneBrowser.cursorY)-1){SceneSceneBrowser.removeFocus();SceneSceneBrowser.cursorX++;SceneSceneBrowser.addFocus();}}}break;case TvKeyCode.KEY_UP:if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_FOLLOWER){if(SceneSceneBrowser.cursorY>0){if(typeof SceneSceneBrowser.followerMatrix[SceneSceneBrowser.cursorY-1][SceneSceneBrowser.cursorX]!=="undefined"){a.preventDefault();SceneSceneBrowser.removeFocus();SceneSceneBrowser.cursorY--;SceneSceneBrowser.addFocus();}else{a.preventDefault();SceneSceneBrowser.removeFocus();SceneSceneBrowser.cursorY--;SceneSceneBrowser.cursorX=SceneSceneBrowser.followerMatrix[SceneSceneBrowser.cursorY].length-1;SceneSceneBrowser.addFocus();}}}else{if(SceneSceneBrowser.mode!=SceneSceneBrowser.MODE_GO&&SceneSceneBrowser.mode!=SceneSceneBrowser.MODE_TOOLS){if(SceneSceneBrowser.cursorY>0){a.preventDefault();SceneSceneBrowser.removeFocus();SceneSceneBrowser.cursorY--;SceneSceneBrowser.addFocus();}}else{if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_GO){SceneSceneBrowser.cursorY=0;SceneSceneBrowser.refreshInputFocus();}else{if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_TOOLS){SceneSceneBrowser.cursorY=0;SceneSceneBrowser.refreshInputFocusTools();}}}}break;case TvKeyCode.KEY_DOWN:if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_FOLLOWER){if(SceneSceneBrowser.cursorY<SceneSceneBrowser.followerMatrix.length-1){if(typeof SceneSceneBrowser.followerMatrix[SceneSceneBrowser.cursorY+1][SceneSceneBrowser.cursorX]!=="undefined"){a.preventDefault();SceneSceneBrowser.removeFocus();SceneSceneBrowser.cursorY++;SceneSceneBrowser.addFocus();}else{a.preventDefault();SceneSceneBrowser.removeFocus();SceneSceneBrowser.cursorY++;SceneSceneBrowser.cursorX=SceneSceneBrowser.followerMatrix[SceneSceneBrowser.cursorY].length-1;SceneSceneBrowser.addFocus();}}}else{if(SceneSceneBrowser.mode!=SceneSceneBrowser.MODE_GO&&SceneSceneBrowser.mode!=SceneSceneBrowser.MODE_TOOLS){if(SceneSceneBrowser.cursorY<SceneSceneBrowser.getRowsCount()-1&&SceneSceneBrowser.cursorX<SceneSceneBrowser.getCellsCount(SceneSceneBrowser.cursorY+1)){a.preventDefault();SceneSceneBrowser.removeFocus();SceneSceneBrowser.cursorY++;SceneSceneBrowser.addFocus();}}else{if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_GO){SceneSceneBrowser.cursorY=1;SceneSceneBrowser.refreshInputFocus();SceneSceneBrowser.ime.blur();}else{if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_TOOLS){SceneSceneBrowser.cursorY=1;SceneSceneBrowser.refreshInputFocusTools();SceneSceneBrowser.ime2.blur();}}}}break;case TvKeyCode.KEY_0:SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_FOLLOWER);break;case TvKeyCode.KEY_ENTER:if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_FOLLOWER){if(SceneSceneBrowser.followerMatrix[SceneSceneBrowser.cursorY][SceneSceneBrowser.cursorX][1]=="stream"){SceneSceneBrowser.selectedChannel=$("#cell_"+SceneSceneBrowser.cursorY+"_"+SceneSceneBrowser.cursorX).attr("data-channelname");SceneSceneBrowser.openStream();}else{if(SceneSceneBrowser.followerMatrix[SceneSceneBrowser.cursorY][SceneSceneBrowser.cursorX][1]=="game"){SceneSceneBrowser.gameSelected=$("#cell_"+SceneSceneBrowser.cursorY+"_"+SceneSceneBrowser.cursorX).attr("data-channelname");SceneSceneBrowser.mode=SceneSceneBrowser.MODE_GAMES_STREAMS;SceneSceneBrowser.returnToGames=false;SceneSceneBrowser.refresh();}}}else{if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_GO){if(SceneSceneBrowser.cursorY==0){SceneSceneBrowser.ime=document.querySelector("#streamname_input");SceneSceneBrowser.ime.addEventListener("input");SceneSceneBrowser.ime.addEventListener("compositionend",function(){console.log("compositionend");});SceneSceneBrowser.ime.focus();}else{SceneSceneBrowser.selectedChannel=$("#streamname_input").val();if(SceneSceneBrowser.selectedChannel!==""){SceneSceneBrowser.loadData();}}}else{if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_TOOLS){if(SceneSceneBrowser.cursorY==0){SceneSceneBrowser.ime2=document.querySelector("#username_input");SceneSceneBrowser.ime2.addEventListener("input");SceneSceneBrowser.ime2.addEventListener("compositionend",function(){console.log("compositionend");});SceneSceneBrowser.ime2.focus();}else{SceneSceneBrowser.followerUsername=$("#username_input").val();localStorage.setItem("followerUsername",$("#username_input").val());if(SceneSceneBrowser.followerUsername!==""){SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_FOLLOWER);}}}else{if(SceneSceneBrowser.mode==SceneSceneBrowser.MODE_GAMES){SceneSceneBrowser.gameSelected=$("#cell_"+SceneSceneBrowser.cursorY+"_"+SceneSceneBrowser.cursorX).attr("data-channelname");SceneSceneBrowser.mode=SceneSceneBrowser.MODE_GAMES_STREAMS;SceneSceneBrowser.returnToGames=true;SceneSceneBrowser.refresh();}else{SceneSceneBrowser.selectedChannel=$("#cell_"+SceneSceneBrowser.cursorY+"_"+SceneSceneBrowser.cursorX).attr("data-channelname");SceneSceneBrowser.openStream();}}}}break;case TvKeyCode.KEY_VOLUMEUP:break;case TvKeyCode.KEY_VOLUMEDOWN:break;case TvKeyCode.KEY_MUTE:break;case TvKeyCode.KEY_RED:SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_ALL);break;case TvKeyCode.KEY_GREEN:SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_GAMES);break;case TvKeyCode.KEY_YELLOW:SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_GO);break;case TvKeyCode.KEY_TOOLS:SceneSceneBrowser.switchMode(SceneSceneBrowser.MODE_TOOLS);break;case TvKeyCode.KEY_BLUE:SceneSceneBrowser.refresh();break;default:break;}};function onCompleteText(a){}SceneSceneBrowser.addNetworkStateChangeListener=function(){var a=function(c){if(c==1||c==4){SceneSceneBrowser.noNetwork=false;if(SceneSceneBrowser.browser){if(SceneSceneBrowser.errorNetwork){SceneSceneBrowser.errorNetwork=false;SceneSceneBrowser.showTable();SceneSceneBrowser.openStream();}else{SceneSceneBrowser.refresh();}}else{SceneSceneChannel.showPlayer();}}else{if(c==2||5){SceneSceneBrowser.noNetwork=true;if(SceneSceneBrowser.browser){SceneSceneBrowser.showDialog(STR_ERROR_NETWORK_DISCONNECT);}else{SceneSceneBrowser.showDialog(STR_ERROR_NETWORK_DISCONNECT);SceneSceneChannel.showDialog(STR_ERROR_NETWORK_DISCONNECT);}}}};try{SceneSceneBrowser.listenerID=webapis.network.addNetworkStateChangeListener(a);}catch(b){}if(SceneSceneBrowser.listenerID>-1){}};